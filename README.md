## Overview

| Developed by | Guardrails AI |
| --- | --- |
| Date of development | Feb 15, 2024 |
| Validator type | Format |
| Blog | - |
| License | Apache 2 |
| Input/Output | Output |

## Description

This package uses the py-readability-metrics package to parse text and find its readability as a US grade level number (0-12).

### (Optional) Intended Use

Use this validator when you're requesting longer passages from your LLM. These algorithms are unreliable and will throw errors when trying to grade passages under 100 words.

## Requirements
- Dependencies: `py-readability-metrics`

## Installation

```bash
guardrails hub install hub://guardrails/reading_level
```

## Usage Examples

### Validating string output via Python

In this example, we apply the validator to a string output generated by an LLM.

```python
# Import Guard and Validator
from guardrails.hub import ReadingLevel
from guardrails import Guard

# Initialize Validator
val = ReadingLevel(
    max=8,
    min=4
)

# Setup Guard
guard = Guard.from_string(
    validators=[val, ...],
)

guard.parse("In a bustling bakery filled with the sweet scent of muffins and cookies, lived a mischievous little yeast named Sprout. Sprout wasn't like the other yeasts who patiently puffed up dough. He longed for adventure! One day, during a mixing frenzy, Sprout jumped on a batch of bread dough and hitched a ride. He soared through the oven, dodging flames like a tiny acrobat, and emerged golden brown and bubbly. Landing on a plate, he saw a wide-eyed boy about to take a bite! Sprout winked, \"This bread might taste extra bouncy today!\" The boy laughed, taking a bite, and his eyes widened with delight. From then on, Sprout continued his bakery escapades, adding a sprinkle of fun to every loaf!")  # Validator passes

guard.parse("A Jay venturing into a yard where Peacocks used to walk, found there a number of feathers which had fallen from the Peacocks when they were moulting. He tied them all to his tail and strutted down towards the Peacocks. When he came near them they soon discovered the cheat, and striding up to him pecked at him and plucked away his borrowed plumes. So the Jay could do no better than go back to the other Jays, who had watched his behaviour from a distance; but they were equally annoyed with him, and told him:\"It is not only fine feathers that make fine birds.\"")  # Validator fails
```

### Validating JSON output via Python

In this example, we apply the validator to a string field of a JSON output generated by an LLM.

```python
# Import Guard and Validator
from pydantic import BaseModel
from guardrails.hub import ReadingLevel
from guardrails import Guard

val = ValidChoices(
		min=8,
        max=12,
		on_fail="reask"
)

# Create Pydantic BaseModel
class AnimalInfo(BaseModel):
		animal_name: str
		animal_story: str

# Create a Guard to check for valid Pydantic output
guard = Guard.from_pydantic(output_class=AnimalInfo)

# Run LLM output generating JSON through guard
guard.parse("""
{
		"animal_name": "Jay",
		"animal_story": "A Jay venturing into a yard where Peacocks used to walk, found there a number of feathers which had fallen from the Peacocks when they were moulting. He tied them all to his tail and strutted down towards the Peacocks. When he came near them they soon discovered the cheat, and striding up to him pecked at him and plucked away his borrowed plumes. So the Jay could do no better than go back to the other Jays, who had watched his behaviour from a distance; but they were equally annoyed with him, and told him:\"It is not only fine feathers that make fine birds.\""
}
""")
```

## API Reference

**`__init__(self, min, max, on_fail="noop")`**
<ul>

Initializes a new instance of the ReadingLevel class.

**Parameters:**

- **`min`** *(int):* Minimum reading US Grade level 
- **`max`** *(int):* Maximum reading US Grade level 
- **`on_fail`** *(str, Callable):* The policy to enact when a validator fails. If `str`, must be one of `reask`, `fix`, `filter`, `refrain`, `noop`, `exception` or `fix_reask`. Otherwise, must be a function that is called when the validator fails.

</ul>

<br>

**`__call__(self, value, metadata={}) â†’ ValidationOutcome`**

<ul>

Validates the given `value` using the rules defined in this validator, relying on the `metadata` provided to customize the validation process. This method is automatically invoked by `guard.parse(...)`, ensuring the validation logic is applied to the input data.

Note:

This method should not be called directly by the user. Instead, invoke `guard.parse(...)` where this method will be called internally for each associated Validator.

**Parameters:**

- **`value`** *(Any):* The input value to validate.
- **`metadata`** *(dict):* A dictionary containing metadata required for validation. Keys and values must match the expectations of this validator.
    
    This validator does not require any metadata

</ul>